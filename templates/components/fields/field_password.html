{% macro field_password(name, label, placeholder="", required=False, error=None) %}
    <div class="space-y-1 password-field">
        <label for="{{ name }}"
               class="block text-sm font-medium text-ink dark:text-ink-inverted">
            {{ label }}
            {% if required %}<span class="text-rose-500">*</span>{% endif %}
        </label>
        <div class="relative flex items-center">
            <input type="password"
                   id="{{ name }}"
                   name="{{ name }}"
                   placeholder="{{ placeholder }}"
                   class="block w-full rounded-lg border border-primary-100 bg-surface-light px-3 py-2 pr-12 text-sm text-ink placeholder:text-ink-soft/60 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-500/40 dark:border-primary-700/60 dark:bg-surface-dark dark:text-ink-inverted dark:placeholder:text-ink-lighter/60 dark:focus:border-primary-400 {{ 'border-rose-400 focus:border-rose-500 focus:ring-rose-400/40 dark:border-rose-500' if error }}"
                   {% if required %}required{% endif %} />
            <button type="button"
                    class="absolute right-2 flex h-7 w-7 items-center justify-center rounded-full bg-surface-dark/5 text-ink-soft/80 hover:bg-primary-200 hover:text-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-1 dark:bg-primary-600/50 dark:text-primary-50 dark:hover:bg-primary-700/50 dark:hover:text-primary-200"
                    onclick=" const input = this.closest('.password-field').querySelector('input'); const icon = this.querySelector('i'); if (input.type === 'password') { input.type = 'text'; icon.classList.remove('fa-eye'); icon.classList.add('fa-eye-slash'); } else { input.type = 'password'; icon.classList.remove('fa-eye-slash'); icon.classList.add('fa-eye'); } "
                    aria-label='Afficher ou masquer le mot de passe'>
                <i class="fa-solid fa-eye text-xs"></i>
            </button>
        </div>
        {% if error %}<p class="text-xs text-rose-600 dark:text-rose-400">{{ error }}</p>{% endif %}
    </div>
{% endmacro %}
